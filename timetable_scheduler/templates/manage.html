{% extends "base.html" %}

{% block title %}Manage {{ entity.title() }} - College Timetable Scheduler{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Header -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">Manage {{ entity.title() }}</h1>
                <p class="text-gray-600 mt-2">Add and manage {{ entity }} for your college</p>
            </div>
            <div class="flex space-x-3">
                <button onclick="toggleAddForm()" class="bg-college-blue text-white px-4 py-2 rounded-md hover:bg-college-dark transition duration-200">
                    <i class="fas fa-plus mr-2"></i>Add {{ entity.rstrip('s').title() }}
                </button>
                {% if data['items'] %}
                <form method="POST" action="{{ url_for('delete_all_entities', entity=entity) }}" style="display: inline-block;" onsubmit="return confirm('⚠️ WARNING: This will delete ALL {{ entity }}! This action cannot be undone. Are you absolutely sure?')">
                    <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition duration-200">
                        <i class="fas fa-trash-alt mr-2"></i>Delete All
                    </button>
                </form>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Add Form (Hidden by default) -->
    <div id="addForm" class="bg-white rounded-lg shadow-md p-6 hidden">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Add New {{ entity.rstrip('s').title() }}</h2>
        <form method="POST" action="{{ url_for('add_entity', entity={'classrooms': 'classroom', 'faculty': 'faculty', 'subjects': 'subject', 'batches': 'batch', 'students': 'student'}.get(entity, entity.rstrip('s'))) }}" class="space-y-4">
            
            {% if entity == 'classrooms' %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-door-open mr-1"></i>Room Name
                        </label>
                        <input type="text" name="name" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="e.g., Room 101, Lab A, Tutorial Room, Auditorium">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-users mr-1"></i>Capacity
                        </label>
                        <input type="number" name="capacity" required min="1"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="60">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <i class="fas fa-tag mr-1"></i>Room Type
                    </label>
                    <select name="type" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue">
                        <option value="regular">Regular Classroom</option>
                        <option value="lab">Laboratory</option>
                        <option value="tutorial">Tutorial Room</option>
                        <option value="auditorium">Auditorium</option>
                    </select>
                </div>
            
            {% elif entity == 'faculty' %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-user mr-1"></i>Full Name
                        </label>
                        <input type="text" name="name" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="Dr. John Smith">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-envelope mr-1"></i>Email
                        </label>
                        <input type="email" name="email" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="john.smith@college.edu">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-building mr-1"></i>Department
                        </label>
                        <input type="text" name="department" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="Computer Science">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-clock mr-1"></i>Max Hours/Day
                        </label>
                        <input type="number" name="max_hours_per_day" value="6" min="1" max="8"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-calendar-times mr-1"></i>Avg Leaves/Month
                        </label>
                        <input type="number" name="avg_leaves_per_month" value="2" min="0" max="10"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue">
                    </div>
                </div>
            
            {% elif entity == 'subjects' %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-book mr-1"></i>Subject Name
                        </label>
                        <input type="text" name="name" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="Data Structures">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-code mr-1"></i>Subject Code
                        </label>
                        <input type="text" name="code" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="CS201">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-calendar mr-1"></i>Semester
                        </label>
                        <select name="semester" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue">
                            <option value="">Select</option>
                            {% for i in range(1, 9) %}
                                <option value="{{ i }}">Semester {{ i }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-building mr-1"></i>Department
                        </label>
                        <input type="text" name="department" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="Computer Science">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-clock mr-1"></i>Hours/Week
                        </label>
                        <input type="number" name="hours_per_week" required min="1" max="10"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-tag mr-1"></i>Type
                        </label>
                        <select name="type" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue">
                            <option value="theory">Theory</option>
                            <option value="practical">Practical</option>
                            <option value="tutorial">Tutorial</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-3">
                        <i class="fas fa-user-tie mr-1"></i>Assign Faculty (Select Multiple)
                    </label>
                    <div class="space-y-2 max-h-32 overflow-y-auto border border-gray-300 rounded-md p-3 bg-gray-50">
                        {% for faculty in data['faculty'] %}
                            <div class="flex items-center">
                                <input type="checkbox" name="faculty_ids" value="{{ faculty.id }}" id="faculty_{{ faculty.id }}"
                                       class="h-4 w-4 text-college-blue focus:ring-college-blue border-gray-300 rounded">
                                <label for="faculty_{{ faculty.id }}" class="ml-2 text-sm text-gray-700 cursor-pointer">
                                    {{ faculty.name }} 
                                    <span class="text-gray-500">({{ faculty.department }})</span>
                                </label>
                            </div>
                        {% endfor %}
                        {% if not data['faculty'] %}
                            <p class="text-sm text-gray-500">No faculty available. <a href="{{ url_for('manage_entity', entity='faculty') }}" class="text-college-blue underline">Add faculty first</a>.</p>
                        {% endif %}
                    </div>
                    <p class="text-xs text-gray-600 mt-1">
                        <i class="fas fa-info-circle mr-1"></i>
                        Check multiple faculty members who can teach this subject
                    </p>
                </div>
            
            {% elif entity == 'batches' %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-users mr-1"></i>Batch Name
                        </label>
                        <input type="text" name="name" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="CS-2024-A">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-building mr-1"></i>Department
                        </label>
                        <input type="text" name="department" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="Computer Science">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-calendar mr-1"></i>Year
                        </label>
                        <select name="year" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue">
                            <option value="">Select</option>
                            {% for i in range(1, 5) %}
                                <option value="{{ i }}">Year {{ i }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-calendar-alt mr-1"></i>Semester
                        </label>
                        <select name="semester" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue">
                            <option value="">Select</option>
                            {% for i in range(1, 9) %}
                                <option value="{{ i }}">Semester {{ i }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-user-friends mr-1"></i>Strength
                        </label>
                        <input type="number" name="strength" required min="1"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="60">
                    </div>
                </div>
            
            {% elif entity == 'students' %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-user mr-1"></i>Username
                        </label>
                        <input type="text" name="username" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="student001">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            <i class="fas fa-lock mr-1"></i>Password
                        </label>
                        <input type="password" name="password" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue"
                               placeholder="Enter password">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <i class="fas fa-users mr-1"></i>Assign to Batch
                    </label>
                    <select name="batch_id" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-college-blue focus:border-college-blue">
                        <option value="">Select Batch</option>
                        {% for batch in data['batches'] %}
                            <option value="{{ batch.id }}">{{ batch.name }} - {{ batch.department }} (Year {{ batch.year }}, Sem {{ batch.semester }})</option>
                        {% endfor %}
                    </select>
                </div>
            {% endif %}

            <div class="flex space-x-3">
                <button type="submit" class="bg-college-blue text-white px-4 py-2 rounded-md hover:bg-college-dark transition duration-200">
                    <i class="fas fa-save mr-2"></i>Save
                </button>
                <button type="button" onclick="toggleAddForm()" class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition duration-200">
                    Cancel
                </button>
            </div>
        </form>
    </div>

    <!-- List Items -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="px-6 py-4 bg-gray-50 border-b">
            <h2 class="text-lg font-semibold text-gray-900">Current {{ entity.title() }}</h2>
        </div>
        
        {% if data['items'] %}
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            {% if entity == 'classrooms' %}
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Capacity</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            {% elif entity == 'faculty' %}
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Department</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Max Hours/Day</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            {% elif entity == 'subjects' %}
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Code</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Department</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Semester</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Hours/Week</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Assigned Faculty</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            {% elif entity == 'batches' %}
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Department</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Year</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Semester</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Strength</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            {% elif entity == 'students' %}
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Batch</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Department</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Year</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Semester</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            {% endif %}
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        {% for item in data['items'] %}
                            <tr class="hover:bg-gray-50">
                                {% if entity == 'classrooms' %}
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ item.name }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.capacity }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full {% if item.type == 'lab' %}bg-blue-100 text-blue-800{% elif item.type == 'tutorial' %}bg-orange-100 text-orange-800{% elif item.type == 'auditorium' %}bg-purple-100 text-purple-800{% else %}bg-green-100 text-green-800{% endif %}">
                                            {{ item.type.title() }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full {% if item.is_available %}bg-green-100 text-green-800{% else %}bg-red-100 text-red-800{% endif %}">
                                            {% if item.is_available %}Available{% else %}Unavailable{% endif %}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <form method="POST" action="{{ url_for('delete_entity', entity='classroom', item_id=item.id) }}" style="display: inline-block;" onsubmit="return confirm('Are you sure you want to delete this classroom? This action cannot be undone.')">
                                            <button type="submit" class="text-red-600 hover:text-red-900 transition duration-200">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </form>
                                    </td>
                                {% elif entity == 'faculty' %}
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ item.name }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.department }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.email or 'N/A' }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.max_hours_per_day }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <form method="POST" action="{{ url_for('delete_entity', entity='faculty', item_id=item.id) }}" style="display: inline-block;" onsubmit="return confirm('Are you sure you want to delete this faculty member? This action cannot be undone.')">
                                            <button type="submit" class="text-red-600 hover:text-red-900 transition duration-200">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </form>
                                    </td>
                                {% elif entity == 'subjects' %}
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ item.name }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.code }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.department }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.semester }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.hours_per_week }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full {% if item.type == 'practical' %}bg-blue-100 text-blue-800{% elif item.type == 'tutorial' %}bg-yellow-100 text-yellow-800{% else %}bg-green-100 text-green-800{% endif %}">
                                            {{ item.type.title() }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {% if item.faculty %}
                                            {% for faculty in item.faculty %}
                                                <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-1 mb-1">
                                                    {{ faculty.name }}
                                                </span>
                                            {% endfor %}
                                        {% else %}
                                            <span class="text-gray-400 italic">No faculty assigned</span>
                                        {% endif %}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <form method="POST" action="{{ url_for('delete_entity', entity='subject', item_id=item.id) }}" style="display: inline-block;" onsubmit="return confirm('Are you sure you want to delete this subject? This action cannot be undone.')">
                                            <button type="submit" class="text-red-600 hover:text-red-900 transition duration-200">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </form>
                                    </td>
                                {% elif entity == 'batches' %}
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ item.name }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.department }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.year }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.semester }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ item.strength }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <form method="POST" action="{{ url_for('delete_entity', entity='batch', item_id=item.id) }}" style="display: inline-block;" onsubmit="return confirm('Are you sure you want to delete this batch? This action cannot be undone.')">
                                            <button type="submit" class="text-red-600 hover:text-red-900 transition duration-200">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </form>
                                    </td>
                                {% elif entity == 'students' %}
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ item.username }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {% if item.batch %}
                                            {{ item.batch.name }}
                                        {% else %}
                                            <span class="text-red-500">No batch assigned</span>
                                        {% endif %}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {% if item.batch %}
                                            {{ item.batch.department }}
                                        {% else %}
                                            -
                                        {% endif %}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {% if item.batch %}
                                            {{ item.batch.year }}
                                        {% else %}
                                            -
                                        {% endif %}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {% if item.batch %}
                                            {{ item.batch.semester }}
                                        {% else %}
                                            -
                                        {% endif %}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <form method="POST" action="{{ url_for('delete_entity', entity='student', item_id=item.id) }}" style="display: inline-block;" onsubmit="return confirm('Are you sure you want to delete this student? This action cannot be undone.')">
                                            <button type="submit" class="text-red-600 hover:text-red-900 transition duration-200">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </form>
                                    </td>
                                {% endif %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="px-6 py-8 text-center">
                <i class="fas fa-inbox text-4xl text-gray-400 mb-4"></i>
                <p class="text-gray-500">No {{ entity }} found. Add your first {{ entity.rstrip('s') }} to get started.</p>
            </div>
        {% endif %}
    </div>
</div>

<script>
function toggleAddForm() {
    const form = document.getElementById('addForm');
    form.classList.toggle('hidden');
}
</script>
{% endblock %}